import{B as U,i as D,g as j,a as O,t as M,c as $,E as Y,V as F,M as Z,b as T,d as C,G as _,f as B,S as p,F as w,e as m,C as b,T as K,h as H,P as J,j as X,k as q}from"./Select-f529c55d.js";import{T as L,O as W,X as Q,Z as x,a as ee,F as te,D as ae,M as oe,c as le}from"./ZoomToExtent-8d43ffe9.js";import{_ as se,r as E,b as f,o as k,c as S,d as l,w as s,e as r,F as V,f as G,p as ne,g as ie,a as g}from"./index-93f5143b.js";import"./index-820b305b.js";const i={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},re={ERROR:"error"};class de extends Y{constructor(t){super(re.ERROR),this.code=t.code,this.message=t.message}}class ue extends U{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=D,this.watchId_=void 0,this.addChangeListener(i.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(i.TRACKING,this.handleTrackingChanged_),t.projection!==void 0&&this.setProjection(t.projection),t.trackingOptions!==void 0&&this.setTrackingOptions(t.trackingOptions),this.setTracking(t.tracking!==void 0?t.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const t=this.getProjection();t&&(this.transform_=j(O("EPSG:4326"),t),this.position_&&this.set(i.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const t=this.getTracking();t&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!t&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){const e=t.coords;this.set(i.ACCURACY,e.accuracy),this.set(i.ALTITUDE,e.altitude===null?void 0:e.altitude),this.set(i.ALTITUDE_ACCURACY,e.altitudeAccuracy===null?void 0:e.altitudeAccuracy),this.set(i.HEADING,e.heading===null?void 0:M(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const d=this.transform_(this.position_);this.set(i.POSITION,d.slice()),this.set(i.SPEED,e.speed===null?void 0:e.speed);const n=$(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(i.ACCURACY_GEOMETRY,n),this.changed()}positionError_(t){this.dispatchEvent(new de(t))}getAccuracy(){return this.get(i.ACCURACY)}getAccuracyGeometry(){return this.get(i.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(i.ALTITUDE)}getAltitudeAccuracy(){return this.get(i.ALTITUDE_ACCURACY)}getHeading(){return this.get(i.HEADING)}getPosition(){return this.get(i.POSITION)}getProjection(){return this.get(i.PROJECTION)}getSpeed(){return this.get(i.SPEED)}getTracking(){return this.get(i.TRACKING)}getTrackingOptions(){return this.get(i.TRACKING_OPTIONS)}setProjection(t){this.set(i.PROJECTION,O(t))}setTracking(t){this.set(i.TRACKING,t)}setTrackingOptions(t){this.set(i.TRACKING_OPTIONS,t)}}const ce=ue;const h=a=>(ne("data-v-9b3d7b55"),a=a(),ie(),a),me=h(()=>g("br",null,null,-1)),fe=h(()=>g("br",null,null,-1)),pe=h(()=>g("br",null,null,-1)),ge=h(()=>g("br",null,null,-1)),he=h(()=>g("br",null,null,-1)),we=h(()=>g("div",{id:"map",class:"map"},null,-1)),ve=h(()=>g("div",{id:"map1",class:"map1"},null,-1)),ye=h(()=>g("div",{id:"map2",class:"map2"},null,-1)),P=E(""),A=E(""),R=E("1"),Ce=[{label:"无",value:"None"},{value:"Point",label:"点"},{value:"LineString",label:"线"},{value:"Polygon",label:"面"},{value:"Circle",label:"圆"},{label:"正方形",value:"Square"},{label:"长方形",value:"Box"}],Te=[{label:"地理经纬度(投影坐标系)",value:"EPSG:4326",state:!1},{label:"Web墨卡托(投影坐标系)",value:"X-EPSG:3857",state:!1},{label:"EPSG:3857",value:"EPSG:3857",state:!0},{label:"EPSG:53009",value:"EPSG:53009",state:!0},{label:"EPSG:4326",value:"EPSG:4326",state:!0},{label:"EPSG:6326",value:"EPSG:6326",state:!0}],_e={data(){return{address:{},type:"EPSG:4326",key:"",map:"",draw:"",source:"",vectorLayer:"",view:new F({projection:"EPSG:4326",center:[0,0],zoom:1,minZoom:-10,maxZoom:100})}},mounted(){this.map=new Z({target:"map",layers:[],view:this.view})},watch:{type:function(){}},methods:{testOSM(){var a=new L({source:new W});this.map.addLayer(a)},testTianDiTu(){var a=new L({source:new Q({url:"http://t{0-7}.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=12c00f9a0d966a5f834e00fe91e4bb3e",crossOrigin:"anonymous",wrapX:!1})});this.map.addLayer(a)},test1(){var a=new T({source:new C({format:new _,url:"./src/data/park-border-1.json"})});this.map.addLayer(a)},testPark(){var a=new T({source:new C({format:new _,url:"./src/data/park-3857.json"})});this.map.addLayer(a)},testZoom(){var a=new x;this.map.addControl(a);var t=new ee({extent:[131e5,429e4,132e5,521e4]});this.map.addControl(t)},testModify(){var a={init:()=>{var t=new X;this.map.addInteraction(t),console.log(t.getFeatures());var e=new oe({features:t.getFeatures()});this.map.addInteraction(e),t.setActive(!0),e.setActive(!0)}};a.init()},testView(){var a=this.map.getView();a.setCenter(new B([0,0]))},fullScreen(){var a=new te;this.map.addControl(a)},fillStyle(){var a=new C;new p({source:a,fill:new w({color:"#fff"}),stroke:new m({color:"#fc3",width:2})}),this.map.addLayer(a)},loadStyle(){var a=new b({radius:5,fill:null,stroke:new m({color:"red",width:1})});new K({font:"13px Microsoft Yahei",fill:new w({color:"#666"}),stroke:new m({color:"#fff",width:3}),offsetY:-15});var t={Point:[new p({image:a})],MultiPoint:[new p({image:a})],LineString:[new p({stroke:new m({color:"red",width:1})})],MultiLineString:[new p({stroke:new m({color:"red",width:1})})],Polygon:[new p({stroke:new m({color:"blue",lineDash:[4],width:3})})],MultiPolygon:[new p({stroke:new m({color:"yellow",width:1}),fill:new w({color:"#f40"})})]},e=function(n,u){return t[n.getGeometry().getType()]},d=new T({style:e,source:new C({format:new _,url:"./src/data/park-pro-num.json"})});this.map.addLayer(d)},reset(){this.map.removeLayer();var a=this.map.getView();a.setCenter([0,0]),a.setZoom(2)},initLayer(){this.source=new C({wrapX:!1}),this.vectorLayer=new T({source:this.source,fill:new w({color:"#fff"}),stroke:new m({color:"#f00",width:2}),image:new b({radius:7,fill:new w({color:"#f00"})})}),this.map.addLayer(this.vectorLayer)},changeDraw(a){console.log(a),this.map.removeInteraction(this.draw),this.addInteraction(a)},addInteraction(a){if(a!=="None"){var t,e;a==="Square"?(a="Circle",t=le(4)):a==="Box"&&(a="LineString",e=2,t=function(d,n){var u=d[0],c=d[1];return n||(n=new q([[u,[u[0],c[1]],c,[c[0],u[1]],u]])),n.setCoordinates([[u,[u[0],c[1]],c,[c[0],u[1]],u]]),n}),this.draw=new ae({source:this.source,type:a,geometryFunction:t,maxPoints:e}),this.map.addInteraction(this.draw)}},openLabel(){this.map.on("click",a=>{console.log(a),alert(a.coordinates)})},changeCoordinateType(a){console.log(a),this.type=a},testLocation(){var a=new ce({projection:this.map.getView().getProjection(),trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}});a.setTracking(!0),a.on("change:accuracyGeometry",function(){accuracyFeature.setGeometry(a.getAccuracyGeometry())});var t=new H;t.setStyle(new p({image:new b({radius:6,fill:new w({color:"#39C"}),stroke:new m({color:"#fff",width:2})})})),a.on("change:position",function(){var e=a.getPosition();t.setGeometry(e?new J(e):null)})}}},be=Object.assign(_e,{__name:"index",setup(a){return(t,e)=>{const d=f("el-tag"),n=f("el-button"),u=f("el-option"),c=f("el-select"),I=f("el-radio"),N=f("el-radio-group"),v=f("el-input"),y=f("el-form-item"),z=f("el-form");return k(),S("div",null,[l(d,{for:""},{default:s(()=>[r("加载地图")]),_:1}),l(n,{size:"small",onClick:e[0]||(e[0]=o=>t.testOSM())},{default:s(()=>[r("testOSM")]),_:1}),l(n,{size:"small",onClick:e[1]||(e[1]=o=>t.testTianDiTu())},{default:s(()=>[r("testTianDiTu")]),_:1}),l(n,{size:"small",onClick:e[2]||(e[2]=o=>t.test1())},{default:s(()=>[r("test1")]),_:1}),l(n,{size:"small",onClick:e[3]||(e[3]=o=>t.testPark())},{default:s(()=>[r("testPark")]),_:1}),me,l(d,{for:""},{default:s(()=>[r("加载控件")]),_:1}),l(n,{size:"small",onClick:e[4]||(e[4]=o=>t.testZoom())},{default:s(()=>[r("testZoom")]),_:1}),l(n,{size:"small",onClick:e[5]||(e[5]=o=>t.testView())},{default:s(()=>[r("testView")]),_:1}),l(n,{size:"small",onClick:e[6]||(e[6]=o=>t.testModify())},{default:s(()=>[r("testModify")]),_:1}),l(n,{size:"small",onClick:e[7]||(e[7]=o=>t.fullScreen())},{default:s(()=>[r("fullScreen")]),_:1}),l(n,{disabled:"",size:"small",onClick:e[8]||(e[8]=o=>t.fillStyle())},{default:s(()=>[r("fillStyle")]),_:1}),l(n,{size:"small",onClick:e[9]||(e[9]=o=>t.loadStyle())},{default:s(()=>[r("loadStyle")]),_:1}),l(n,{size:"small",onClick:e[10]||(e[10]=o=>t.reset())},{default:s(()=>[r("reset")]),_:1}),fe,l(d,{for:""},{default:s(()=>[r("Draw绘制")]),_:1}),l(n,{size:"small",onClick:e[11]||(e[11]=o=>t.initLayer())},{default:s(()=>[r("initLayer")]),_:1}),l(c,{modelValue:P.value,"onUpdate:modelValue":e[12]||(e[12]=o=>P.value=o),class:"m-2",placeholder:"Select",size:"small",onChange:e[13]||(e[13]=o=>t.changeDraw(P.value))},{default:s(()=>[(k(),S(V,null,G(Ce,o=>l(u,{key:o.value,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),pe,l(d,{for:""},{default:s(()=>[r("地图标注")]),_:1}),l(n,{size:"small",onClick:e[14]||(e[14]=o=>t.openLabel())},{default:s(()=>[r("openLabel")]),_:1}),l(N,{size:"small",modelValue:R.value,"onUpdate:modelValue":e[15]||(e[15]=o=>R.value=o),class:"ml-4"},{default:s(()=>[l(I,{size:"small",label:"1",value:"vector"},{default:s(()=>[r("Vector Labels")]),_:1}),l(I,{size:"small",label:"2",value:"overlay"},{default:s(()=>[r("Overlay Labels")]),_:1})]),_:1},8,["modelValue"]),ge,l(d,{for:""},{default:s(()=>[r("坐标转换")]),_:1}),l(c,{onChange:e[16]||(e[16]=o=>t.changeCoordinateType(A.value)),modelValue:A.value,"onUpdate:modelValue":e[17]||(e[17]=o=>A.value=o),class:"m-2",placeholder:"Select",size:"small"},{default:s(()=>[(k(),S(V,null,G(Te,o=>l(u,{key:o.value,label:o.label,value:o.value,disabled:!o.state},null,8,["label","value","disabled"])),64))]),_:1},8,["modelValue"]),he,l(d,{for:""},{default:s(()=>[r("定位导航")]),_:1}),l(n,{size:"small",onClick:e[18]||(e[18]=o=>t.testLocation())},{default:s(()=>[r("testLocation")]),_:1}),l(z,{size:"small",inline:!0,model:t.address,"label-width":"70px"},{default:s(()=>[l(y,{label:"位置精度"},{default:s(()=>[l(v,{modelValue:t.address.accuracy,"onUpdate:modelValue":e[19]||(e[19]=o=>t.address.accuracy=o)},null,8,["modelValue"])]),_:1}),l(y,{label:"海拔高度"},{default:s(()=>[l(v,{modelValue:t.address.altitude,"onUpdate:modelValue":e[20]||(e[20]=o=>t.address.altitude=o)},null,8,["modelValue"])]),_:1}),l(y,{label:"海拔精度"},{default:s(()=>[l(v,{modelValue:t.address.altitudeAccuracy,"onUpdate:modelValue":e[21]||(e[21]=o=>t.address.altitudeAccuracy=o)},null,8,["modelValue"])]),_:1}),l(y,{label:"航向"},{default:s(()=>[l(v,{modelValue:t.address.heading,"onUpdate:modelValue":e[22]||(e[22]=o=>t.address.heading=o)},null,8,["modelValue"])]),_:1}),l(y,{label:"速度"},{default:s(()=>[l(v,{modelValue:t.address.speed,"onUpdate:modelValue":e[23]||(e[23]=o=>t.address.speed=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),we,ve,ye])}}}),Ee=se(be,[["__scopeId","data-v-9b3d7b55"]]);export{Ee as default};
