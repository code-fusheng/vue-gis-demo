import{L as Ei,l as Fi,m as k,n as m,o as kt,p as Si,q as wi,r as Pi,s as we,u as gt,v as Ri,w as Li,x as Di,y as se,z as bi,A as Le,D as De,H as Ii,I as Mi,J as vi,K as ki,N as ft,O as Ot,Q as j,R as We,U as At,W as Ke,X as _t,Y as w,Z as mt,_ as Oi,$ as Ai,a0 as Gi,a1 as Gt,a2 as Nt,a3 as Ni,a4 as v,a5 as ji,a6 as jt,a7 as be,a8 as zi,a9 as Xi,aa as Te,ab as xe,ac as Yi,a as $e,ad as Ui,ae as Zi,af as qi,ag as J,ah as Ki,E as Qe,ai as Vi,aj as Bi,ak as Hi,al as Wi,am as $i,an as Qi,ao as zt,ap as Ji,aq as es,ar as P,as as de,b as Xt,d as Yt,at as ts,au as Ve,av as is,aw as ss,ax as b,ay as ns,az as M,aA as Ie,h as Z,P as Pe,aB as Re,aC as Tt,aD as rs,aE as Ut,aF as Zt,aG as qt,k as Kt,aH as os,aI as as,aJ as Vt,aK as q,aL as ls,aM as Be,aN as hs,aO as cs,aP as us,aQ as ds,aR as gs,aS as xt,aT as Ct,aU as yt,aV as ze,aW as U,aX as fs,aY as _s,aZ as ms,a_ as pt,a$ as Ts,b0 as xs,b1 as Je,b2 as Me,b3 as et,b4 as Et,b5 as Ft,b6 as St,b7 as he,b8 as Cs,b9 as ys,ba as ps}from"./Select-f529c55d.js";const Ce={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Es extends Ei{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Ce.PRELOAD)}setPreload(e){this.set(Ce.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ce.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ce.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const Fs=Es;let Ss=class extends Fi{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(k.CHANGE)}release(){this.state===m.ERROR&&this.setState(m.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==m.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==m.LOADED){e.interimTile=null;break}else e.getState()==m.LOADING?t=e:e.getState()==m.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==m.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){kt()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const s=t-i+1e3/60;return s>=this.transition_?1:Si(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}};const Bt=Ss;class ws extends Bt{constructor(e,t,i,s,n,r){super(e,t,r),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=n}getImage(){return this.image_}setImage(e){this.image_=e,this.state=m.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=m.ERROR,this.unlistenImage_(),this.image_=Ps(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=m.LOADED:this.state=m.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==m.ERROR&&(this.state=m.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==m.IDLE&&(this.state=m.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=wi(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Ps(){const h=Pi(1,1);return h.fillStyle="rgba(0,0,0,0)",h.fillRect(0,0,1,1),h.canvas}const Ht=ws;class Rs extends Bt{constructor(e,t,i,s,n,r,o,l,a,c,u,d){super(n,m.IDLE,{interpolate:!!d}),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=r||n,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const g=s.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const T=f?we(g,f):g;if(gt(T)===0){this.state=m.EMPTY;return}const x=e.getExtent();x&&(_?_=we(_,x):_=x);const C=s.getResolution(this.wrappedTileCoord_[0]),y=Ri(e,i,T,C);if(!isFinite(y)||y<=0){this.state=m.EMPTY;return}const p=c!==void 0?c:Li;if(this.triangulation_=new Di(e,i,T,_,y*p,C),this.triangulation_.getTriangles().length===0){this.state=m.EMPTY;return}this.sourceZ_=t.getZForResolution(y);let F=this.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(F[1]=se(F[1],_[1],_[3]),F[3]=se(F[3],_[1],_[3])):F=we(F,_)),!gt(F))this.state=m.EMPTY;else{const E=t.getTileRangeForExtentAndZ(F,this.sourceZ_);for(let O=E.minX;O<=E.maxX;O++)for(let A=E.minY;A<=E.maxY;A++){const Y=a(this.sourceZ_,O,A,o);Y&&this.sourceTiles_.push(Y)}this.sourceTiles_.length===0&&(this.state=m.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==m.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=m.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s=typeof i=="number"?i:i[0],n=typeof i=="number"?i:i[1],r=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=bi(s,n,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),r,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=m.LOADED}this.changed()}load(){if(this.state==m.IDLE){this.state=m.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(i==m.IDLE||i==m.LOADING){e++;const s=Le(t,k.CHANGE,function(n){const r=t.getState();(r==m.LOADED||r==m.ERROR||r==m.EMPTY)&&(De(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,s){t.getState()==m.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(De),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ii(this.canvas_.getContext("2d")),Mi.push(this.canvas_),this.canvas_=null),super.release()}}const He=Rs;class Wt{constructor(e,t,i,s){this.minX=e,this.maxX=t,this.minY=i,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function $(h,e,t,i,s){return s!==void 0?(s.minX=h,s.maxX=e,s.minY=t,s.maxY=i,s):new Wt(h,e,t,i)}const $t=Wt;class Ls extends vi{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=ki(),this.tmpTileRange_=new $t(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),s=t.getUseInterimTilesOnError();return i==m.LOADED||i==m.EMPTY||i==m.ERROR&&!s}getTile(e,t,i,s){const n=s.pixelRatio,r=s.viewState.projection,o=this.getLayer();let a=o.getSource().getTile(e,t,i,n,r);return a.getState()==m.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),s=ft(t.pixelToCoordinateTransform,e.slice()),n=i.getExtent();if(n&&!Ot(n,s))return null;const r=t.pixelRatio,o=t.viewState.projection,l=t.viewState,a=i.getRenderSource(),c=a.getTileGridForProjection(l.projection),u=a.getTilePixelRatio(t.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){const g=c.getTileCoordForCoordAndZ(s,d),f=a.getTile(d,g[1],g[2],r,o);if(!(f instanceof Ht||f instanceof He)||f instanceof He&&f.getState()===m.EMPTY)return null;if(f.getState()!==m.LOADED)continue;const _=c.getOrigin(d),T=j(c.getTileSize(d)),x=c.getResolution(d),C=Math.floor(u*((s[0]-_[0])/x-g[1]*T[0])),y=Math.floor(u*((_[1]-s[1])/x-g[2]*T[1])),p=Math.round(u*a.getGutterForProjection(l.projection));return this.getImageData(f.getImage(),C+p,y+p)}return null}loadedTileCallback(e,t,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,t,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],s=e.viewState,n=s.projection,r=s.resolution,o=s.center,l=s.rotation,a=e.pixelRatio,c=this.getLayer(),u=c.getSource(),d=u.getRevision(),g=u.getTileGridForProjection(n),f=g.getZForResolution(r,u.zDirection),_=g.getResolution(f);let T=e.extent;const x=e.viewState.resolution,C=u.getTilePixelRatio(a),y=Math.round(We(T)/x*a),p=Math.round(At(T)/x*a),F=i.extent&&Ke(i.extent,n);F&&(T=we(T,Ke(i.extent,n)));const E=_*y/2/C,O=_*p/2/C,A=[o[0]-E,o[1]-O,o[0]+E,o[1]+O],Y=g.getTileRangeForExtentAndZ(T,f),ne={};ne[f]={};const st=this.createLoadedTileFinder(u,n,ne),nt=this.tmpExtent,rt=this.tmpTileRange_;this.newTiles_=!1;const mi=l?_t(s.center,x,l,e.size):void 0;for(let z=Y.minX;z<=Y.maxX;++z)for(let R=Y.minY;R<=Y.maxY;++R){if(l&&!g.tileCoordIntersectsViewport([f,z,R],mi))continue;const L=this.getTile(f,z,R,e);if(this.isDrawableTile(L)){const B=w(this);if(L.getState()==m.LOADED){ne[f][L.tileCoord.toString()]=L;let H=L.inTransition(B);H&&i.opacity!==1&&(L.endTransition(B),H=!1),!this.newTiles_&&(H||!this.renderedTiles.includes(L))&&(this.newTiles_=!0)}if(L.getAlpha(B,e.time)===1)continue}const Ge=g.getTileCoordChildTileRange(L.tileCoord,rt,nt);let oe=!1;Ge&&(oe=st(f+1,Ge)),oe||g.forEachTileCoordParentTileRange(L.tileCoord,st,rt,nt)}const fe=_/r*a/C;mt(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,l,-y/2,-p/2);const Oe=Oi(this.pixelTransform);this.useContainer(t,Oe,this.getBackground(e));const S=this.context,K=S.canvas;Ai(this.inversePixelTransform,this.pixelTransform),mt(this.tempTransform,y/2,p/2,fe,fe,0,-y/2,-p/2),K.width!=y||K.height!=p?(K.width=y,K.height=p):this.containerReused||S.clearRect(0,0,y,p),F&&this.clipUnrotated(S,e,F),u.getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,e),this.renderedTiles.length=0;let re=Object.keys(ne).map(Number);re.sort(Gi);let V,Ae,I;i.opacity===1&&(!this.containerReused||u.getOpaque(e.viewState.projection))?re=re.reverse():(V=[],Ae=[]);for(let z=re.length-1;z>=0;--z){const R=re[z],L=u.getTilePixelSize(R,a,n),oe=g.getResolution(R)/_,B=L[0]*oe*fe,H=L[1]*oe*fe,Ne=g.getTileCoordForCoordAndZ(Gt(A),R),ot=g.getTileCoordExtent(Ne),_e=ft(this.tempTransform,[C*(ot[0]-A[0])/_,C*(A[3]-ot[3])/_]),Ti=C*u.getGutterForProjection(n),at=ne[R];for(const xi in at){const W=at[xi],lt=W.tileCoord,ht=Ne[1]-lt[1],Ci=Math.round(_e[0]-(ht-1)*B),ct=Ne[2]-lt[2],yi=Math.round(_e[1]-(ct-1)*H),G=Math.round(_e[0]-ht*B),N=Math.round(_e[1]-ct*H),ae=Ci-G,le=yi-N,ut=f===R,dt=ut&&W.getAlpha(w(this),e.time)!==1;let je=!1;if(!dt)if(V){I=[G,N,G+ae,N,G+ae,N+le,G,N+le];for(let me=0,pi=V.length;me<pi;++me)if(f!==R&&R<Ae[me]){const D=V[me];Nt([G,N,G+ae,N+le],[D[0],D[3],D[4],D[7]])&&(je||(S.save(),je=!0),S.beginPath(),S.moveTo(I[0],I[1]),S.lineTo(I[2],I[3]),S.lineTo(I[4],I[5]),S.lineTo(I[6],I[7]),S.moveTo(D[6],D[7]),S.lineTo(D[4],D[5]),S.lineTo(D[2],D[3]),S.lineTo(D[0],D[1]),S.clip())}V.push(I),Ae.push(R)}else S.clearRect(G,N,ae,le);this.drawTileImage(W,e,G,N,ae,le,Ti,ut),V&&!dt?(je&&S.restore(),this.renderedTiles.unshift(W)):this.renderedTiles.push(W),this.updateUsedTiles(e.usedTiles,u,W)}}return this.renderedRevision=d,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!Ni(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=a,this.renderedProjection=n,this.manageTilePyramid(e,u,g,a,n,T,f,c.getPreload()),this.scheduleExpireCache(e,u),this.postRender(S,e),i.extent&&S.restore(),S.imageSmoothingEnabled=!0,Oe!==K.style.transform&&(K.style.transform=Oe),this.container}drawTileImage(e,t,i,s,n,r,o,l){const a=this.getTileImage(e);if(!a)return;const c=w(this),u=t.layerStatesArray[t.layerIndex],d=u.opacity*(l?e.getAlpha(c,t.time):1),g=d!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(a,o,o,a.width-2*o,a.height-2*o,i,s,n,r),g&&this.context.restore(),d!==u.opacity?t.animate=!0:l&&e.endTransition(c)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(s,n,r){const o=w(s);o in r.usedTiles&&s.expireCache(r.viewState.projection,r.usedTiles[o])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const s=w(t);s in e||(e[s]={}),e[s][i.getKey()]=!0}manageTilePyramid(e,t,i,s,n,r,o,l,a){const c=w(t);c in e.wantedTiles||(e.wantedTiles[c]={});const u=e.wantedTiles[c],d=e.tileQueue,g=i.getMinZoom(),f=e.viewState.rotation,_=f?_t(e.viewState.center,e.viewState.resolution,f,e.size):void 0;let T=0,x,C,y,p,F,E;for(E=g;E<=o;++E)for(C=i.getTileRangeForExtentAndZ(r,E,C),y=i.getResolution(E),p=C.minX;p<=C.maxX;++p)for(F=C.minY;F<=C.maxY;++F)f&&!i.tileCoordIntersectsViewport([E,p,F],_)||(o-E<=l?(++T,x=t.getTile(E,p,F,s,n),x.getState()==m.IDLE&&(u[x.getKey()]=!0,d.isKeyQueued(x.getKey())||d.enqueue([x,c,i.getTileCoordCenter(x.tileCoord),y])),a!==void 0&&a(x)):t.useTile(E,p,F,n));t.updateCacheSize(T,n)}}const Ds=Ls;class bs extends Fs{constructor(e){super(e)}createRenderer(){return new Ds(this)}}const Is=bs,hn=Object.freeze(Object.defineProperty({__proto__:null,default:Is},Symbol.toStringTag,{value:"Module"}));class Qt{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return v(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return v(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){v(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}const cn=Object.freeze(Object.defineProperty({__proto__:null,default:Qt},Symbol.toStringTag,{value:"Module"}));function wt(h,e,t,i){return i!==void 0?(i[0]=h,i[1]=e,i[2]=t,i):[h,e,t]}function ge(h,e,t){return h+"/"+e+"/"+t}function Jt(h){return ge(h[0],h[1],h[2])}function un(h){const[e,t,i]=h.substring(h.lastIndexOf("/")+1,h.length).split(",").map(Number);return ge(e,t,i)}function Ms(h){return h.split("/").map(Number)}function vs(h){return(h[1]<<h[0])+h[2]}function ks(h,e){const t=h[0],i=h[1],s=h[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const n=e.getFullTileRange(t);return n?n.containsXY(i,s):!0}class Os extends Qt{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=Ms(e)[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(Jt(s.tileCoord)),s.release())})}}const ei=Os,Xe={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Q=[0,0,0],X=5;class As{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,v(ji(this.resolutions_,function(s,n){return n-s},!0),17);let t;if(!e.origins){for(let s=0,n=this.resolutions_.length-1;s<n;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,v(this.origins_.length==this.resolutions_.length,20));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Gt(i)),v(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,v(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:jt,v(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(s,n){const r=new $t(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const o=this.getTileRangeForExtentAndZ(i,n);r.minX=Math.max(o.minX,r.minX),r.maxX=Math.min(o.maxX,r.maxX),r.minY=Math.max(o.minY,r.minY),r.maxY=Math.min(o.maxY,r.maxY)}return r},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const s=this.getTileRangeForExtentAndZ(e,t);for(let n=s.minX,r=s.maxX;n<=r;++n)for(let o=s.minY,l=s.maxY;o<=l;++o)i([t,n,o])}forEachTileCoordParentTileRange(e,t,i,s){let n,r,o,l=null,a=e[0]-1;for(this.zoomFactor_===2?(r=e[1],o=e[2]):l=this.getTileCoordExtent(e,s);a>=this.minZoom;){if(this.zoomFactor_===2?(r=Math.floor(r/2),o=Math.floor(o/2),n=$(r,r,o,o,i)):n=this.getTileRangeForExtentAndZ(l,a,i),t(a,n))return!0;--a}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const n=e[1]*2,r=e[2]*2;return $(n,n+1,r,r+1,t)}const s=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],n=e[1],r=e[2];if(t===s)return $(n,r,n,r,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-s),a=Math.floor(n*l),c=Math.floor(r*l);if(t<s)return $(a,a,c,c,i);const u=Math.floor(l*(n+1))-1,d=Math.floor(l*(r+1))-1;return $(a,u,c,d,i)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,i)}getTileRangeExtent(e,t,i){const s=this.getOrigin(e),n=this.getResolution(e),r=j(this.getTileSize(e),this.tmpSize_),o=s[0]+t.minX*r[0]*n,l=s[0]+(t.maxX+1)*r[0]*n,a=s[1]+t.minY*r[1]*n,c=s[1]+(t.maxY+1)*r[1]*n;return be(o,a,l,c,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Q);const s=Q[1],n=Q[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Q);const r=Q[1],o=Q[2];return $(s,r,n,o,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=j(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*i,t[1]-(e[2]+.5)*s[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),s=this.getResolution(e[0]),n=j(this.getTileSize(e[0]),this.tmpSize_),r=i[0]+e[1]*n[0]*s,o=i[1]-(e[2]+1)*n[1]*s,l=r+n[0]*s,a=o+n[1]*s;return be(r,o,l,a,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,s,n){const r=this.getZForResolution(i),o=i/this.getResolution(r),l=this.getOrigin(r),a=j(this.getTileSize(r),this.tmpSize_);let c=o*(e-l[0])/i/a[0],u=o*(l[1]-t)/i/a[1];return s?(c=Te(c,X)-1,u=Te(u,X)-1):(c=xe(c,X),u=xe(u,X)),wt(r,c,u,n)}getTileCoordForXYAndZ_(e,t,i,s,n){const r=this.getOrigin(i),o=this.getResolution(i),l=j(this.getTileSize(i),this.tmpSize_);let a=(e-r[0])/o/l[0],c=(r[1]-t)/o/l[1];return s?(a=Te(a,X)-1,c=Te(c,X)-1):(a=xe(a,X),c=xe(c,X)),wt(i,a,c,n)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=zi(this.resolutions_,e,t||0);return se(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Xi(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let s=this.minZoom;s<t;++s)i[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=i}}const ti=As;function tt(h){let e=h.getDefaultTileGrid();return e||(e=oi(h),h.setDefaultTileGrid(e)),e}function ii(h,e,t){const i=e[0],s=h.getTileCoordCenter(e),n=ve(t);if(!Ot(n,s)){const r=We(n),o=Math.ceil((n[0]-s[0])/r);return s[0]+=r*o,h.getTileCoordForCoordAndZ(s,i)}return e}function si(h,e,t,i){i=i!==void 0?i:"top-left";const s=ri(h,e,t);return new ti({extent:h,origin:Yi(h,i),resolutions:s,tileSize:t})}function ni(h){const e=h||{},t=e.extent||$e("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ri(t,e.maxZoom,e.tileSize,e.maxResolution)};return new ti(i)}function ri(h,e,t,i){e=e!==void 0?e:Ui,t=j(t!==void 0?t:jt);const s=At(h),n=We(h);i=i>0?i:Math.max(n/t[0],s/t[1]);const r=e+1,o=new Array(r);for(let l=0;l<r;++l)o[l]=i/Math.pow(2,l);return o}function oi(h,e,t,i){const s=ve(h);return si(s,e,t,i)}function ve(h){h=$e(h);let e=h.getExtent();if(!e){const t=180*Zi.degrees/h.getMetersPerUnit();e=be(-t,-t,t,t)}return e}const dn=Object.freeze(Object.defineProperty({__proto__:null,createForExtent:si,createForProjection:oi,createXYZ:ni,extentFromProjection:ve,getForProjection:tt,wrapX:ii},Symbol.toStringTag,{value:"Module"}));class Gs extends qi{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&j(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new ei(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,s){const n=this.getTileCacheForProjection(e);if(!n)return!1;let r=!0,o,l,a;for(let c=i.minX;c<=i.maxX;++c)for(let u=i.minY;u<=i.maxY;++u)l=ge(t,c,u),a=!1,n.containsKey(l)&&(o=n.get(l),a=o.getState()===m.LOADED,a&&(a=s(o)!==!1)),a||(r=!1);return r}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,s,n){return kt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:tt(e)}getTileCacheForProjection(e){const t=this.getProjection();return v(t===null||J(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const s=this.getTileGridForProjection(i),n=this.getTilePixelRatio(t),r=j(s.getTileSize(e),this.tmpSize);return n==1?r:Ki(r,n,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=ii(i,e,t)),ks(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,s){}}class Ns extends Qe{constructor(e,t){super(e),this.tile=t}}const js=Gs;function ai(h,e){const t=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,n=/\{-y\}/g;return function(r,o,l){if(r)return h.replace(t,r[0].toString()).replace(i,r[1].toString()).replace(s,r[2].toString()).replace(n,function(){const a=r[0],c=e.getFullTileRange(a);return v(c,55),(c.getHeight()-r[2]-1).toString()})}}function li(h,e){const t=h.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=ai(h[s],e);return hi(i)}function hi(h){return h.length===1?h[0]:function(e,t,i){if(!e)return;const s=vs(e),n=Vi(s,h.length);return h[n](e,t,i)}}function zs(h,e,t){}function ci(h){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(h);if(t){const i=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let n;for(n=i;n<=s;++n)e.push(h.replace(t[0],String.fromCharCode(n)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(h),t){const i=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=i;s++)e.push(h.replace(t[0],s.toString()));return e}return e.push(h),e}const gn=Object.freeze(Object.defineProperty({__proto__:null,createFromTemplate:ai,createFromTemplates:li,createFromTileUrlFunctions:hi,expandUrl:ci,nullTileUrlFunction:zs},Symbol.toStringTag,{value:"Module"}));class it extends js{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===it.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=w(t),s=t.getState();let n;s==m.LOADING?(this.tileLoadingKeys_[i]=!0,n=Xe.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],n=s==m.ERROR?Xe.TILELOADERROR:s==m.LOADED?Xe.TILELOADEND:void 0),n!=null&&this.dispatchEvent(new Ns(n,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=ci(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(li(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const s=ge(e,t,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const Xs=it;class ui extends Xs{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ys,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Ht,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const s in this.tileCacheForProjection){const n=this.tileCacheForProjection[s];n.expireCache(n==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!J(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!J(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||J(t,e)))return this.tileGrid;const i=w(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=tt(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||J(t,e))return this.tileCache;const i=w(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new ei(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,s,n,r){const o=[e,t,i],l=this.getTileCoordForTileUrlFunction(o,n),a=l?this.tileUrlFunction(l,s,n):void 0,c=new this.tileClass(o,a!==void 0?m.IDLE:m.EMPTY,a!==void 0?a:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=r,c.addEventListener(k.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,t,i,s,n){const r=this.getProjection();if(!r||!n||J(r,n))return this.getTileInternal(e,t,i,s,r||n);const o=this.getTileCacheForProjection(n),l=[e,t,i];let a;const c=Jt(l);o.containsKey(c)&&(a=o.get(c));const u=this.getKey();if(a&&a.key==u)return a;const d=this.getTileGridForProjection(r),g=this.getTileGridForProjection(n),f=this.getTileCoordForTileUrlFunction(l,n),_=new He(r,d,n,g,l,f,this.getTilePixelRatio(s),this.getGutter(),(T,x,C,y)=>this.getTileInternal(T,x,C,y,r),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return _.key=u,a?(_.interimTile=a,_.refreshInterimChain(),o.replace(c,_)):o.set(c,_),_}getTileInternal(e,t,i,s,n){let r=null;const o=ge(e,t,i),l=this.getKey();if(!this.tileCache.containsKey(o))r=this.createTile_(e,t,i,s,n,l),this.tileCache.set(o,r);else if(r=this.tileCache.get(o),r.key!=l){const a=r;r=this.createTile_(e,t,i,s,n,l),a.getState()==m.IDLE?r.interimTile=a.interimTile:r.interimTile=a,r.refreshInterimChain(),this.tileCache.replace(o,r)}return r}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=$e(e);if(i){const s=w(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function Ys(h,e){h.getImage().src=e}const fn=Object.freeze(Object.defineProperty({__proto__:null,default:ui},Symbol.toStringTag,{value:"Module"}));class Us extends ui{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:ni({extent:ve(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const Zs=Us,qs='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Ks extends Zs{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[qs];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const _n=Ks;class ke extends Bi{constructor(e,t,i){super(),i!==void 0&&t===void 0?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new ke(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){const n=this.flatCoordinates,r=e-n[0],o=t-n[1],l=r*r+o*o;if(l<s){if(l===0)for(let a=0;a<this.stride;++a)i[a]=n[a];else{const a=this.getRadius()/Math.sqrt(l);i[0]=n[0]+a*r,i[1]=n[1]+a*o;for(let c=2;c<this.stride;++c)i[c]=n[c]}return i.length=this.stride,l}return s}containsXY(e,t){const i=this.flatCoordinates,s=e-i[0],n=t-i[1];return s*s+n*n<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return be(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Nt(e,t)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:Hi(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],s=e.slice();s[t]=s[0]+i;for(let n=1;n<t;++n)s[t+n]=e[n];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let n=Wi(s,0,e,this.stride);s[n++]=s[0]+t;for(let r=1,o=this.stride;r<o;++r)s[n++]=s[r];s.length=n,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),s=this.getStride();this.setCenter($i(i,0,i.length,s,e,t,i)),this.changed()}translate(e,t){const i=this.getCenter(),s=this.getStride();this.setCenter(Qi(i,0,i.length,s,e,t,i)),this.changed()}}ke.prototype.transform;const di=ke,ye={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class pe extends Qe{constructor(e,t){super(e),this.feature=t}}function Vs(h,e){const t=[];for(let i=0;i<e.length;++i){const n=e[i].getGeometry();gi(h,n,t)}return t}function Ee(h,e){return Vt(h[0],h[1],e[0],e[1])}function ee(h,e){const t=h.length;return e<0?h[e+t]:e>=t?h[e-t]:h[e]}function Fe(h,e,t){let i,s;e<t?(i=e,s=t):(i=t,s=e);const n=Math.ceil(i),r=Math.floor(s);if(n>r){const l=te(h,i),a=te(h,s);return Ee(l,a)}let o=0;if(i<n){const l=te(h,i),a=ee(h,n);o+=Ee(l,a)}if(r<s){const l=ee(h,r),a=te(h,s);o+=Ee(l,a)}for(let l=n;l<r-1;++l){const a=ee(h,l),c=ee(h,l+1);o+=Ee(a,c)}return o}function gi(h,e,t){if(e instanceof Re){Se(h,e.getCoordinates(),!1,t);return}if(e instanceof Ut){const i=e.getCoordinates();for(let s=0,n=i.length;s<n;++s)Se(h,i[s],!1,t);return}if(e instanceof Kt){const i=e.getCoordinates();for(let s=0,n=i.length;s<n;++s)Se(h,i[s],!0,t);return}if(e instanceof Zt){const i=e.getCoordinates();for(let s=0,n=i.length;s<n;++s){const r=i[s];for(let o=0,l=r.length;o<l;++o)Se(h,r[o],!0,t)}return}if(e instanceof os){const i=e.getGeometries();for(let s=0;s<i.length;++s)gi(h,i[s],t);return}}const Ye={index:-1,endIndex:NaN};function Bs(h,e,t,i){const s=h[0],n=h[1];let r=1/0,o=-1,l=NaN;for(let u=0;u<e.targets.length;++u){const d=e.targets[u],g=d.coordinates;let f=1/0,_;for(let T=0;T<g.length-1;++T){const x=g[T],C=g[T+1],y=fi(s,n,x,C);y.squaredDistance<f&&(f=y.squaredDistance,_=T+y.along)}f<r&&(r=f,d.ring&&e.targetIndex===u&&(d.endIndex>d.startIndex?_<d.startIndex&&(_+=g.length):d.endIndex<d.startIndex&&_>d.startIndex&&(_-=g.length)),l=_,o=u)}const a=e.targets[o];let c=a.ring;if(e.targetIndex===o&&c){const u=te(a.coordinates,l),d=t.getPixelFromCoordinate(u);Ie(d,e.startPx)>i&&(c=!1)}if(c){const u=a.coordinates,d=u.length,g=a.startIndex,f=l;if(g<f){const _=Fe(u,g,f);Fe(u,g,f-d)<_&&(l-=d)}else{const _=Fe(u,g,f);Fe(u,g,f+d)<_&&(l+=d)}}return Ye.index=o,Ye.endIndex=l,Ye}function Se(h,e,t,i){const s=h[0],n=h[1];for(let r=0,o=e.length-1;r<o;++r){const l=e[r],a=e[r+1],c=fi(s,n,l,a);if(c.squaredDistance===0){const u=r+c.along;i.push({coordinates:e,ring:t,startIndex:u,endIndex:u});return}}}const Ue={along:0,squaredDistance:0};function fi(h,e,t,i){const s=t[0],n=t[1],r=i[0],o=i[1],l=r-s,a=o-n;let c=0,u=s,d=n;return(l!==0||a!==0)&&(c=se(((h-s)*l+(e-n)*a)/(l*l+a*a),0,1),u+=l*c,d+=a*c),Ue.along=c,Ue.squaredDistance=as(Vt(h,e,u,d),10),Ue}function te(h,e){const t=h.length;let i=Math.floor(e);const s=e-i;i>=t?i-=t:i<0&&(i+=t);let n=i+1;n>=t&&(n-=t);const r=h[i],o=r[0],l=r[1],a=h[n],c=a[0]-o,u=a[1]-l;return[o+c*s,l+u*s]}class Hs extends zt{constructor(e){const t=e;t.stopDown||(t.stopDown=Ji),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=$s(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:es,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const s=this.mode_;if(s==="Circle")i=function(n,r,o){const l=r||new di([NaN,NaN]),a=P(n[0],o),c=de(a,P(n[n.length-1],o));l.setCenterAndRadius(a,Math.sqrt(c),this.geometryLayout_);const u=q();return u&&l.transform(o,u),l};else{let n;s==="Point"?n=Pe:s==="LineString"?n=Re:s==="Polygon"&&(n=Kt),i=function(r,o,l){return o?s==="Polygon"?r[0].length?o.setCoordinates([r[0].concat([r[0][0]])],this.geometryLayout_):o.setCoordinates([],this.geometryLayout_):o.setCoordinates(r,this.geometryLayout_):o=new n(r,this.geometryLayout_),o}}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Xt({source:new Yt({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:Ws(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:ts,this.freehandCondition_,e.freehand?this.freehandCondition_=Ve:this.freehandCondition_=e.freehandCondition?e.freehandCondition:is,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(ss.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Ve:t=e:t=ls,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===k.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===b.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===b.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===b.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===b.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===b.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===b.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===b.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new ns(b.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),i=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),s=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),n=M([i,s]),r=this.traceSource_.getFeaturesInExtent(n);if(r.length===0)return;const o=Vs(e.coordinate,r);o.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:o,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,s=e.startIndex<=t;i===s?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const s=Math.ceil(e);let n=Math.floor(t);n===t&&(n-=1),i=n-s+1}else{const s=Math.floor(e);let n=Math.ceil(t);n===t&&(n+=1),i=s-n+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const s=[];if(t<i){const n=Math.ceil(t);let r=Math.floor(i);r===i&&(r-=1);for(let o=n;o<=r;++o)s.push(ee(e.coordinates,o))}else{const n=Math.floor(t);let r=Math.ceil(i);r===i&&(r+=1);for(let o=n;o>=r;--o)s.push(ee(e.coordinates,o))}s.length&&this.appendCoordinates(s)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Ie(t.startPx,e.pixel)<this.snapTolerance_)return;const i=Bs(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const o=t.targets[i.index];this.addTracedCoordinates_(o,o.startIndex,i.endIndex)}else{const o=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(o,i.endIndex)}t.targetIndex=i.index;const s=t.targets[t.targetIndex];s.endIndex=i.endIndex;const n=te(s.coordinates,s.endIndex),r=this.getMap().getPixelFromCoordinate(n);e.coordinate=n,e.pixel=[Math.round(r[0]),Math.round(r[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(e.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,s=t[0]-i[0],n=t[1]-i[1],r=s*s+n*n;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let s=!1,n=[this.finishCoordinate_];const r=this.mode_;if(r==="Point")i=!0;else if(r==="Circle")i=this.sketchCoords_.length===2;else if(r==="LineString")s=!t&&this.sketchCoords_.length>this.minPoints_;else if(r==="Polygon"){const o=this.sketchCoords_;s=o[0].length>this.minPoints_,n=[o[0][0],o[0][o[0].length-2]],t?n=[o[0][0]]:n=[o[0][0],o[0][o[0].length-2]]}if(s){const o=this.getMap();for(let l=0,a=n.length;l<a;l++){const c=n[l],u=o.getPixelFromCoordinate(c),d=e[0]-u[0],g=e[1]-u[1],f=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(d*d+g*g)<=f,i){this.finishCoordinate_=c;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Z(new Pe(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Z);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new Re(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=Tt(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Z(new Re(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new pe(ye.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),s=t.getView().getProjection(),n=Tt(this.geometryLayout_);let r,o;for(;e.length<n;)e.push(0);this.mode_==="Point"?o=this.sketchCoords_:this.mode_==="Polygon"?(r=this.sketchCoords_[0],o=r[r.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(r=this.sketchCoords_,o=r[r.length-1]),o[0]=e[0],o[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let s,n;const r=this.mode_;r==="LineString"||r==="Circle"?(this.finishCoordinate_=e.slice(),n=this.sketchCoords_,n.length>=this.maxPoints_&&(this.freehand_?n.pop():s=!0),n.push(e.slice()),this.geometryFunction_(n,t,i)):r==="Polygon"&&(n=this.sketchCoords_[0],n.length>=this.maxPoints_&&(this.freehand_?n.pop():s=!0),n.push(e.slice()),s&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),s&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),s=this.mode_;for(let n=0;n<e;++n){let r;if(s==="LineString"||s==="Circle"){if(r=this.sketchCoords_,r.splice(-2,1),r.length>=2){this.finishCoordinate_=r[r.length-2].slice();const o=this.finishCoordinate_.slice();r[r.length-1]=o,this.createOrUpdateSketchPoint_(o)}this.geometryFunction_(r,t,i),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(s==="Polygon"){r=this.sketchCoords_[0],r.splice(-2,1);const o=this.sketchLine_.getGeometry();if(r.length>=2){const l=r[r.length-2].slice();r[r.length-1]=l,this.createOrUpdateSketchPoint_(l)}o.setCoordinates(r),this.geometryFunction_(this.sketchCoords_,t,i)}if(r.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const i=e.getGeometry(),s=this.getMap().getView().getProjection();this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,i,s)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,i,s),t=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new rs([t])):this.type_==="MultiLineString"?e.setGeometry(new Ut([t])):this.type_==="MultiPolygon"&&e.setGeometry(new Zt([t])),this.dispatchEvent(new pe(ye.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new pe(ye.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let s;if(t==="LineString"||t==="Circle")s=this.sketchCoords_;else if(t==="Polygon")s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&s.shift(),s.pop();for(let r=0;r<e.length;r++)this.addToDrawing_(e[r]);const n=e[e.length-1];this.addToDrawing_(n),this.modifyDrawing_(n)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new Z(new Pe(s)),this.updateSketchFeatures_(),this.dispatchEvent(new pe(ye.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function Ws(){const h=qt();return function(e,t){return h[e.getGeometry().getType()]}}function mn(h,e){return function(t,i,s){const n=P(t[0],s),r=P(t[t.length-1],s),o=Math.sqrt(de(n,r));i=i||Be(new di(n),h);let l=e;if(!e&&e!==0){const c=r[0]-n[0],u=r[1]-n[1];l=Math.atan2(u,c)}hs(i,n,o,l);const a=q();return a&&i.transform(s,a),i}}function $s(h){switch(h){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+h)}}const Tn=Hs,Pt=0,ue=1,Rt=[0,0,0,0],ie=[],Ze={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class qe extends Qe{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}class Qs extends zt{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:cs,this.defaultDeleteCondition_=function(i){return us(i)&&ds(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Ve,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new gs,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Xt({source:new Yt({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:en(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new xt(this.source_.getFeatures()),this.source_.addEventListener(Ct.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Ct.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(yt.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(yt.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const s=this.SEGMENT_WRITERS_[t.getType()];s&&s(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),e.addEventListener(k.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new xt;const i=this.featuresBeingModified_.getArray();for(let s=0,n=t.length;s<n;++s){const r=t[s];for(let o=0,l=r.length;o<l;++o){const a=r[o].feature;a&&!i.includes(a)&&this.featuresBeingModified_.push(a)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new qe(Ze.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(k.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(s){e===s.feature&&i.push(s)});for(let s=i.length-1;s>=0;--s){const n=i[s];for(let r=this.dragSegments_.length-1;r>=0;--r)this.dragSegments_[r][0]===n&&this.dragSegments_.splice(r,1);t.remove(n)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),s={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),s)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let s=0,n=i.length;s<n;++s){const r=i[s],o={feature:e,geometry:t,depth:[s],index:s,segment:[r,r]};this.rBush_.insert(t.getExtent(),o)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let s=0,n=i.length-1;s<n;++s){const r=i.slice(s,s+2),o={feature:e,geometry:t,index:s,segment:r};this.rBush_.insert(M(r),o)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let s=0,n=i.length;s<n;++s){const r=i[s];for(let o=0,l=r.length-1;o<l;++o){const a=r.slice(o,o+2),c={feature:e,geometry:t,depth:[s],index:o,segment:a};this.rBush_.insert(M(a),c)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let s=0,n=i.length;s<n;++s){const r=i[s];for(let o=0,l=r.length-1;o<l;++o){const a=r.slice(o,o+2),c={feature:e,geometry:t,depth:[s],index:o,segment:a};this.rBush_.insert(M(a),c)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let s=0,n=i.length;s<n;++s){const r=i[s];for(let o=0,l=r.length;o<l;++o){const a=r[o];for(let c=0,u=a.length-1;c<u;++c){const d=a.slice(c,c+2),g={feature:e,geometry:t,depth:[o,s],index:c,segment:d};this.rBush_.insert(M(d),g)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),s={feature:e,geometry:t,index:Pt,segment:[i,i]},n={feature:e,geometry:t,index:ue,segment:[i,i]},r=[s,n];s.featureSegments=r,n.featureSegments=r,this.rBush_.insert(ze(i),s);let o=t;const l=q();if(l&&this.getMap()){const a=this.getMap().getView().getProjection();o=o.clone().transform(l,a),o=Be(o).transform(a,l)}this.rBush_.insert(o.getExtent(),n)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let s=0;s<i.length;++s){const n=i[s],r=this.SEGMENT_WRITERS_[n.getType()];r(e,n)}}createOrUpdateVertexFeature_(e,t,i){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new Z(new Pe(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",t),s.set("geometries",i),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==b.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=b.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==b.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],s=[];for(let n=0,r=this.dragSegments_.length;n<r;++n){const o=this.dragSegments_[n],l=o[0],a=l.feature;i.includes(a)||i.push(a);const c=l.geometry;s.includes(c)||s.push(c);const u=l.depth;let d;const g=l.segment,f=o[1];for(;t.length<c.getStride();)t.push(g[f][t.length]);switch(c.getType()){case"Point":d=t,g[0]=t,g[1]=t;break;case"MultiPoint":d=c.getCoordinates(),d[l.index]=t,g[0]=t,g[1]=t;break;case"LineString":d=c.getCoordinates(),d[l.index+f]=t,g[f]=t;break;case"MultiLineString":d=c.getCoordinates(),d[u[0]][l.index+f]=t,g[f]=t;break;case"Polygon":d=c.getCoordinates(),d[u[0]][l.index+f]=t,g[f]=t;break;case"MultiPolygon":d=c.getCoordinates(),d[u[1]][u[0]][l.index+f]=t,g[f]=t;break;case"Circle":if(g[0]=t,g[1]=t,l.index===Pt)this.changingFeature_=!0,c.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;const _=e.map.getView().getProjection();let T=Ie(P(c.getCenter(),_),P(t,_));const x=q();if(x){const C=c.clone().transform(x,_);C.setRadius(T),T=C.transform(_,x).getRadius()}c.setRadius(T),this.changingFeature_=!1}break}d&&this.setGeometryCoordinates_(c,d)}this.createOrUpdateVertexFeature_(t,i,s)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){const s=e.map.getView().getProjection(),n=[],r=i.getGeometry().getCoordinates(),o=M([r]),l=this.rBush_.getInExtent(o),a={};l.sort(Js);for(let c=0,u=l.length;c<u;++c){const d=l[c],g=d.segment;let f=w(d.geometry);const _=d.depth;if(_&&(f+="-"+_.join("-")),a[f]||(a[f]=new Array(2)),d.geometry.getType()==="Circle"&&d.index===ue){const T=Dt(t,d,s);U(T,r)&&!a[f][0]&&(this.dragSegments_.push([d,0]),a[f][0]=d);continue}if(U(g[0],r)&&!a[f][0]){this.dragSegments_.push([d,0]),a[f][0]=d;continue}if(U(g[1],r)&&!a[f][1]){if(a[f][0]&&a[f][0].index===0){let T=d.geometry.getCoordinates();switch(d.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":T=T[_[1]];case"Polygon":if(d.index!==T[_[0]].length-2)continue;break}}this.dragSegments_.push([d,1]),a[f][1]=d;continue}w(g)in this.vertexSegments_&&!a[f][0]&&!a[f][1]&&this.insertVertexCondition_(e)&&n.push(d)}n.length&&this.willModifyFeatures_(e,[n]);for(let c=n.length-1;c>=0;--c)this.insertVertex_(n[c],r)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],s=i.geometry;if(s.getType()==="Circle"){const n=s.getCenter(),r=i.featureSegments[0],o=i.featureSegments[1];r.segment[0]=n,r.segment[1]=n,o.segment[0]=n,o.segment[1]=n,this.rBush_.update(ze(n),r);let l=s;const a=q();if(a){const c=e.map.getView().getProjection();l=l.clone().transform(a,c),l=Be(l).transform(c,a)}this.rBush_.update(l.getExtent(),o)}else this.rBush_.update(M(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new qe(Ze.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,i){const s=i||t.getCoordinateFromPixel(e),n=t.getView().getProjection(),r=function(a,c){return Lt(s,a,n)-Lt(s,c,n)};let o,l;if(this.hitDetection_){const a=typeof this.hitDetection_=="object"?c=>c===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(c,u,d)=>{const g=d||c.getGeometry();if(g.getType()==="Point"&&c instanceof Z&&this.features_.getArray().includes(c)){l=g;const f=l.getFlatCoordinates().slice(0,2);o=[{feature:c,geometry:l,segment:[f,f]}]}return!0},{layerFilter:a})}if(!o){const a=Ke(ze(s,Rt),n),c=t.getView().getResolution()*this.pixelTolerance_,u=fs(_s(a,c,Rt),n);o=this.rBush_.getInExtent(u)}if(o&&o.length>0){const a=o.sort(r)[0],c=a.segment;let u=Dt(s,a,n);const d=t.getPixelFromCoordinate(u);let g=Ie(e,d);if(l||g<=this.pixelTolerance_){const f={};if(f[w(c)]=!0,this.snapToPointer_||(this.delta_[0]=u[0]-s[0],this.delta_[1]=u[1]-s[1]),a.geometry.getType()==="Circle"&&a.index===ue)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u,[a.feature],[a.geometry]);else{const _=t.getPixelFromCoordinate(c[0]),T=t.getPixelFromCoordinate(c[1]),x=de(d,_),C=de(d,T);g=Math.sqrt(Math.min(x,C)),this.snappedToVertex_=g<=this.pixelTolerance_,this.snappedToVertex_&&(u=x>C?c[1]:c[0]),this.createOrUpdateVertexFeature_(u,[a.feature],[a.geometry]);const y={};y[w(a.geometry)]=!0;for(let p=1,F=o.length;p<F;++p){const E=o[p].segment;if(U(c[0],E[0])&&U(c[1],E[1])||U(c[0],E[1])&&U(c[1],E[0])){const O=w(o[p].geometry);O in y||(y[O]=!0,f[w(E)]=!0)}else break}}this.vertexSegments_=f;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,s=e.feature,n=e.geometry,r=e.depth,o=e.index;let l;for(;t.length<n.getStride();)t.push(0);switch(n.getType()){case"MultiLineString":l=n.getCoordinates(),l[r[0]].splice(o+1,0,t);break;case"Polygon":l=n.getCoordinates(),l[r[0]].splice(o+1,0,t);break;case"MultiPolygon":l=n.getCoordinates(),l[r[1]][r[0]].splice(o+1,0,t);break;case"LineString":l=n.getCoordinates(),l.splice(o+1,0,t);break;default:return}this.setGeometryCoordinates_(n,l);const a=this.rBush_;a.remove(e),this.updateSegmentIndices_(n,o,r,1);const c={segment:[i[0],t],feature:s,geometry:n,depth:r,index:o};a.insert(M(c.segment),c),this.dragSegments_.push([c,1]);const u={segment:[t,i[1]],feature:s,geometry:n,depth:r,index:o+1};a.insert(M(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=b.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new qe(Ze.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let i=!1,s,n,r,o,l,a,c,u,d,g,f;for(l=e.length-1;l>=0;--l)r=e[l],g=r[0],f=w(g.feature),g.depth&&(f+="-"+g.depth.join("-")),f in t||(t[f]={}),r[1]===0?(t[f].right=g,t[f].index=g.index):r[1]==1&&(t[f].left=g,t[f].index=g.index+1);for(f in t){switch(d=t[f].right,c=t[f].left,a=t[f].index,u=a-1,c!==void 0?g=c:g=d,u<0&&(u=0),o=g.geometry,n=o.getCoordinates(),s=n,i=!1,o.getType()){case"MultiLineString":n[g.depth[0]].length>2&&(n[g.depth[0]].splice(a,1),i=!0);break;case"LineString":n.length>2&&(n.splice(a,1),i=!0);break;case"MultiPolygon":s=s[g.depth[1]];case"Polygon":s=s[g.depth[0]],s.length>4&&(a==s.length-1&&(a=0),s.splice(a,1),i=!0,a===0&&(s.pop(),s.push(s[0]),u=s.length-1));break}if(i){this.setGeometryCoordinates_(o,n);const _=[];if(c!==void 0&&(this.rBush_.remove(c),_.push(c.segment[0])),d!==void 0&&(this.rBush_.remove(d),_.push(d.segment[1])),c!==void 0&&d!==void 0){const T={depth:g.depth,feature:g.feature,geometry:g.geometry,index:u,segment:_};this.rBush_.insert(M(T.segment),T)}this.updateSegmentIndices_(o,a,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,s){this.rBush_.forEachInExtent(e.getExtent(),function(n){n.geometry===e&&(i===void 0||n.depth===void 0||ms(n.depth,i))&&n.index>t&&(n.index+=s)})}}function Js(h,e){return h.index-e.index}function Lt(h,e,t){const i=e.geometry;if(i.getType()==="Circle"){let n=i;if(e.index===ue){const r=q();r&&(n=n.clone().transform(r,t));const o=de(n.getCenter(),P(h,t)),l=Math.sqrt(o)-n.getRadius();return l*l}}const s=P(h,t);return ie[0]=P(e.segment[0],t),ie[1]=P(e.segment[1],t),xs(s,ie)}function Dt(h,e,t){const i=e.geometry;if(i.getType()==="Circle"&&e.index===ue){let n=i;const r=q();return r&&(n=n.clone().transform(r,t)),pt(n.getClosestPoint(P(h,t)),t)}const s=P(h,t);return ie[0]=P(e.segment[0],t),ie[1]=P(e.segment[1],t),pt(Ts(s,ie),t)}function en(){const h=qt();return function(e,t){return h.Point}}const xn=Qs,bt=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],It={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class tn extends Je{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const s=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=s,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(k.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Me} ${et}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(Mt(t))if(vt(t))nn(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?sn(i):_i(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=vt(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Et(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(It.ENTERFULLSCREEN)):(Et(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(It.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(Ft.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(Ft.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,s=e.length;i<s;++i)De(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();Mt(i)?this.element.classList.remove(St):this.element.classList.add(St);for(let s=0,n=bt.length;s<n;++s)e.push(Le(i,bt[s],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function Mt(h){const e=h.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&h.fullscreenEnabled)}function vt(h){return!!(h.webkitIsFullScreen||h.fullscreenElement)}function _i(h){h.requestFullscreen?h.requestFullscreen():h.webkitRequestFullscreen&&h.webkitRequestFullscreen()}function sn(h){h.webkitRequestFullscreen?h.webkitRequestFullscreen():_i(h)}function nn(h){h.exitFullscreen?h.exitFullscreen():h.webkitExitFullscreen&&h.webkitExitFullscreen()}const Cn=tn,ce={VERTICAL:0,HORIZONTAL:1};class rn extends Je{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=ce.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const t=e.className!==void 0?e.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=t+"-thumb "+Me;const s=this.element;s.className=t+" "+Me+" "+et,s.appendChild(i),s.addEventListener(he.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),s.addEventListener(he.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),s.addEventListener(he.POINTERUP,this.handleDraggerEnd_.bind(this),!1),s.addEventListener(k.CLICK,this.handleContainerClick_.bind(this),!1),i.addEventListener(k.CLICK,Cs,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let t=e.offsetWidth,i=e.offsetHeight;if(t===0&&i===0)return this.sliderInitialized_=!1;const s=getComputedStyle(e);t-=parseFloat(s.paddingRight)+parseFloat(s.paddingLeft),i-=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom);const n=e.firstElementChild,r=getComputedStyle(n),o=n.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),l=n.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);return this.thumbSize_=[o,l],t>i?(this.direction_=ce.HORIZONTAL,this.widthLimit_=t-o):(this.direction_=ce.VERTICAL,this.heightLimit_=i-l),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),i=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),s=this.getResolutionForPosition_(i),n=t.getConstrainedZoom(t.getZoomForResolution(s));t.animateInternal({zoom:n,duration:this.duration_,easing:ys})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const i=this.handleDraggerDrag_,s=this.handleDraggerEnd_,n=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(Le(n,he.POINTERMOVE,i,this),Le(n,he.POINTERUP,s,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,i=e.clientY-this.startY_,s=this.getRelativePosition_(t,i);this.currentResolution_=this.getResolutionForPosition_(s),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(De),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const t=this.getPositionForResolution_(e),i=this.element.firstElementChild;this.direction_==ce.HORIZONTAL?i.style.left=this.widthLimit_*t+"px":i.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let i;return this.direction_===ce.HORIZONTAL?i=e/this.widthLimit_:i=t/this.heightLimit_,se(i,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const t=this.getMap().getView().getValueForResolutionFunction();return se(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}const yn=rn;class on extends Je{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const t=e.className!==void 0?e.className:"ol-zoom-extent",i=e.label!==void 0?e.label:"E",s=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",n=document.createElement("button");n.setAttribute("type","button"),n.title=s,n.appendChild(typeof i=="string"?document.createTextNode(i):i),n.addEventListener(k.CLICK,this.handleClick_.bind(this),!1);const r=t+" "+Me+" "+et,o=this.element;o.className=r,o.appendChild(n)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),i=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(ps(i))}}const pn=on;export{qs as A,Ce as B,Ds as C,Tn as D,Cn as F,Ht as I,Qt as L,xn as M,_n as O,Is as T,Xs as U,Zs as X,yn as Z,pn as a,ui as b,mn as c,ni as d,ve as e,hi as f,wt as g,Bt as h,js as i,Ns as j,tt as k,ei as l,ge as m,Xe as n,ti as o,ci as p,vs as q,li as r,zs as s,Ms as t,un as u,hn as v,fn as w,cn as x,dn as y,gn as z};
